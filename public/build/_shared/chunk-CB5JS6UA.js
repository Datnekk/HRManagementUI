import{a as g,b as h}from"/build/_shared/chunk-SNKE4NUQ.js";import{h as u}from"/build/_shared/chunk-G5K32BIS.js";import{R as m,V as b}from"/build/_shared/chunk-GKEYVIAD.js";import{a as S,c as f}from"/build/_shared/chunk-TQC3RT7F.js";import{c as i}from"/build/_shared/chunk-Q3IECNXJ.js";var a=i(S(),1);var r=i(f(),1),N=t=>!!t&&!t.ErrorMessage,A=t=>t?.ErrorMessage??null;function k({opened:t,onClose:s,title:y,children:M,submitLabel:p="Submit",isSuccess:l=N,getError:d=A}){let e=u(),o=(0,a.useRef)(!1),n=e.state==="submitting";(0,a.useEffect)(()=>{(!t||n)&&(o.current=!1)},[t,n]),(0,a.useEffect)(()=>{!t&&e.data&&(e.data=void 0)},[t,e]),(0,a.useEffect)(()=>{if(!(!e.data||!t||o.current))if(o.current=!0,l(e.data))h(e.data.message??"Success"),s();else{let c=d(e.data);c&&g(c)}},[e.data,l,d,s,t]);let E=(0,a.useCallback)(()=>{o.current=!1,s()},[s]);return(0,r.jsx)(b,{opened:t,onClose:E,title:y,centered:!0,children:(0,r.jsxs)(e.Form,{method:"post",className:"space-y-4",children:[M,(0,r.jsx)(m,{type:"submit",disabled:n,fullWidth:!0,loading:n,children:p})]})})}export{k as a};
